((function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=Object.prototype.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};b=typeof exports!="undefined"&&exports!==null?exports:this,a={VERSION:"0.0.1",Helpers:{slug:function(a){return a==null&&(a=""),a.toLowerCase().replace(/\ +/g,"-").replace(/[^a-z0-9-]/g,"")}}},b.Backpack=a,a.Menu=function(b){function d(){this.add=c(this.add,this),this.slug=c(this.slug,this),this.addClass=c(this.addClass,this),this.setParent=c(this.setParent,this),this.render=c(this.render,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="ul",d.prototype.className="backpack-menu",d.prototype.initialize=function(a,b){return a==null&&(a="body"),b==null&&(b=""),this.setParent(a),this.addClass(b),this},d.prototype.render=function(){return this.$el.appendTo(this.parent),this},d.prototype.setParent=function(a){return this.parent=$(a),this},d.prototype.addClass=function(a){return a==null&&(a=""),this.$el.addClass(this.slug(a)),this},d.prototype.slug=function(b){return b==null&&(b=""),a.Helpers.slug(b)},d.prototype.add=function(b,c,d){var e;return b==null&&(b=""),c==null&&(c={}),b.el!=null?e=b:e=new a.MenuItem(b,c,d),this.$el.append(e.render().el),this},d}(Backbone.View),a.MenuItem=function(b){function d(){this.setContent=c(this.setContent,this),this.slug=c(this.slug,this),this.addClass=c(this.addClass,this),this.render=c(this.render,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="li",d.prototype.className="backpack-menu-item",d.prototype.template=_.template("<a href='<%= href %>'><%= content %></a>"),d.prototype.events={},d.prototype.initialize=function(a,b,c){return a==null&&(a=""),b==null&&(b={}),c==null&&(c=""),this.setContent(a,b),this.delegateEvents(this.events),this.addClass(c),this},d.prototype.render=function(){return this.$el.html(this.content),this},d.prototype.addClass=function(a){return a==null&&(a=""),this.$el.addClass(this.slug(a)),this},d.prototype.slug=function(b){return b==null&&(b=""),a.Helpers.slug(b)},d.prototype.setContent=function(a,b){return a==null&&(a=""),b==null&&(b={}),a.el!=null?(this.content=a.el,this):_.isString(b)?(this.content=this.template({href:b,content:a}),this):_.isFunction(b)?(this.events={click:b},this.content=this.template({href:"javascript:void(0);",content:a}),this):(this.events=b,this.content=this.template({href:"javascript:void(0);",content:a}),this)},d}(Backbone.View),a.Dialog=function(b){function d(){this.slug=c(this.slug,this),this.addClass=c(this.addClass,this),this.show=c(this.show,this),this.hide=c(this.hide,this),this.setParent=c(this.setParent,this),this.setContent=c(this.setContent,this),this.render=c(this.render,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="div",d.prototype.className="backpack-dialog",d.prototype.options={name:"",parent:"body",content:""},d.prototype.events={click:"hide"},d.prototype.initialize=function(){var a,b,c,d;return d=this.options,b=d.name,c=d.parent,a=d.content,this.setContent(a),this.setParent(c),this.addClass(b),this},d.prototype.render=function(){return this.$el.appendTo(this.parent),this},d.prototype.setContent=function(a){return a.el!=null?this.content=a:this.content=a,this.$el.html(this.content),this},d.prototype.setParent=function(a){return this.parent=a,this},d.prototype.hide=function(){return this.$el.addClass("hide"),this.undelegateEvents(),this},d.prototype.show=function(){return this.delegateEvents(this.events),this.$el.removeClass("hide"),this},d.prototype.addClass=function(a){return this.$el.addClass(this.slug(a)),this},d.prototype.slug=function(b){return b==null&&(b=""),a.Helpers.slug(b)},d}(Backbone.View),a.Overlay=function(b){function f(){this.setOptions=c(this.setOptions,this),this.setParent=c(this.setParent,this),this.setColor=c(this.setColor,this),this.setLock=c(this.setLock,this),this.unlock=c(this.unlock,this),this.show=c(this.show,this),this.hide=c(this.hide,this),this.render=c(this.render,this),f.__super__.constructor.apply(this,arguments)}var d;return e(f,b),f.prototype.id="backpack-overlay",f.prototype.tagName="div",f.prototype.className="hide",f.prototype.options={lock:!1,parent:"body",color:"rgba(0,0,0,0.7)"},f.prototype.events={click:"unlock"},d=!1,f.getInstance=function(b){var c,e,f,g;return g=b!=null,e=g.lock,f=g.parent,c=g.color,d?d.setLock({lock:e,parent:f,color:c}):d=new a.Overlay},f.prototype.initialize=function(){var a,b,c,e;return d?d:(e=this.options,b=e.lock,c=e.parent,a=e.color,this.setLock(b),this.setParent(c),this.setColor(a),this)},f.prototype.render=function(){return this.$el.prependTo(this.parent),this},f.prototype.hide=function(){return this.$el.addClass("hide"),this.undelegateEvents(),this},f.prototype.show=function(){return this.delegateEvents(this.events),this.$el.removeClass("hide"),this},f.prototype.unlock=function(){return this.lock||this.hide(),this},f.prototype.setLock=function(a){return this.lock=a,this},f.prototype.setColor=function(a){return this.el.style.backgroundColor=a,this},f.prototype.setParent=function(a){return this.parent=a,this},f.prototype.setOptions=function(a){return this.setLock(lock)},f}(Backbone.View),a.Modal=function(b){function f(){this.hide=c(this.hide,this),this.show=c(this.show,this),this.render=c(this.render,this),f.__super__.constructor.apply(this,arguments)}var d;return e(f,b),f.prototype.tagName="div",f.prototype.className="backpack-modal",f.prototype.events={click:"hide"},d=a.Overlay.getInstance(),f.prototype.initialize=function(){return f.__super__.initialize.call(this),this},f.prototype.render=function(){return this.$el.appendTo(this.parent),this},f.prototype.show=function(){return f.__super__.show.call(this),d.setLock(!0).render().show(),this},f.prototype.hide=function(){return f.__super__.hide.call(this),d.render().hide(),this},f}(a.Dialog)})).call(this);