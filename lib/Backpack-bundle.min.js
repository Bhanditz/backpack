((function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=Object.prototype.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};b=typeof exports!="undefined"&&exports!==null?exports:this,a=b.Backpack={VERSION:"0.0.1"},a.Component=function(a){function b(){this.slug=c(this.slug,this),this.removeClass=c(this.removeClass,this),this.addClass=c(this.addClass,this),this.setParent=c(this.setParent,this),this.setContent=c(this.setContent,this),this.prepend=c(this.prepend,this),this.append=c(this.append,this),this.after=c(this.after,this),this.before=c(this.before,this),this.close=c(this.close,this),this.hide=c(this.hide,this),this.show=c(this.show,this),this.render=c(this.render,this),this.setup=c(this.setup,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.tagName="div",b.prototype.className="backpack-component",b.prototype.options={name:"",content:"",parent:"body",hide:!0},b.prototype.initialize=function(){return this.options=_.extend({},this.defaults,this.options),this.setup(),this},b.prototype.setup=function(){var a,b,c,d,e;return e=this.options,b=e.hide,c=e.name,a=e.content,d=e.parent,b&&this.hide(),this.setParent(d),this.setContent(a),this.addClass(this.slug(c)),this},b.prototype.render=function(){return this.parent.append(this.el),this},b.prototype.show=function(){return this.delegateEvents(this.events),this.$el.removeClass("hide"),this},b.prototype.hide=function(){return this.$el.addClass("hide"),this.undelegateEvents(),this},b.prototype.close=function(){return this.hide(),this.remove(),this},b.prototype.before=function(a){if(a==null)return;return this.setContent(a),this.$el.before(a),this},b.prototype.after=function(a){if(a==null)return;return this.setContent(a),this.$el.after(this.content),this},b.prototype.append=function(a){if(a==null)return;return this.setContent(a),this.$el.append(this.content),this},b.prototype.prepend=function(a){if(a==null)return;return this.setContent(a),this.$el.prepend(this.content),this},b.prototype.setContent=function(a){if(a==null)return;return a.el!=null?a.render!=null?this.content=a.render().el:this.content=a.el:this.content=a,this.$el.html(this.content),this},b.prototype.setParent=function(a){if(a==null)return;return this.parent=$(a),this},b.prototype.addClass=function(a){if(a==null)return;return this.$el.addClass(a),this},b.prototype.removeClass=function(a){if(a==null)return;return this.$el.removeClass(a),this},b.prototype.slug=function(a){if(a==null)return;return a.toLowerCase().replace(/\ +/g,"-").replace(/[^a-z0-9-]/g,"")},b}(Backbone.View),a.Overlay=function(a){function b(){this.setColor=c(this.setColor,this),this.setLock=c(this.setLock,this),this.close=c(this.close,this),this.unlock=c(this.unlock,this),this.render=c(this.render,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.events={click:"unlock"},b.prototype.defaults={lockOverlay:!1,color:"rgba(0,0,0,0.7)"},b.prototype.initialize=function(){var a,c,d;return b.__super__.initialize.call(this),this.addClass("backpack-overlay"),d=this.options,c=d.lockOverlay,a=d.color,this.setLock(c),this.setColor(a),this},b.prototype.render=function(){return this.parent.prepend(this.el),this},b.prototype.unlock=function(){return this.lockOverlay||this.close(),this},b.prototype.close=function(){return b.__super__.close.call(this),this.trigger("overlay-close"),this},b.prototype.setLock=function(a){return this.lockOverlay=a,this},b.prototype.setColor=function(a){return this.el.style.backgroundColor=a,this},b}(a.Component),a.Dialog=function(b){function d(){this.close=c(this.close,this),this.hide=c(this.hide,this),this.show=c(this.show,this),this.setOverlay=c(this.setOverlay,this),this.setClosable=c(this.setClosable,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.events={"click .close":"close"},d.prototype.defaults={lockOverlay:!1,showOverlay:!1,closable:!0},d.prototype.initialize=function(){return d.__super__.initialize.call(this),this.addClass("backpack-dialog"),this.options.showOverlay&&this.setOverlay(),this.options.closable&&this.setClosable(),this},d.prototype.setClosable=function(){return this.$el.prepend("<span class='close'>Ã—</span>"),this},d.prototype.setOverlay=function(){return this.overlay=new a.Overlay({lockOverlay:this.options.lockOverlay}),this.overlay.on("overlay-close",this.close),this},d.prototype.show=function(){var a;return d.__super__.show.call(this),(a=this.overlay)!=null&&a.render().show(),this},d.prototype.hide=function(){var a;return d.__super__.hide.call(this),(a=this.overlay)!=null&&a.hide(),this},d.prototype.close=function(){var a;return d.__super__.close.call(this),(a=this.overlay)!=null&&a.remove(),this},d}(a.Component),a.Modal=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.defaults={lockOverlay:!0,showOverlay:!0,closable:!0},b.prototype.initialize=function(){return b.__super__.initialize.call(this,this.defaults),this.addClass("backpack-modal"),this},b}(a.Dialog),a.Menu=function(b){function d(){this.add=c(this.add,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="ul",d.prototype.initialize=function(){return d.__super__.initialize.call(this),this.addClass("backpack-menu"),this},d.prototype.add=function(b,c,d){var e;return b.el!=null?e=b:e=new a.MenuItem(b,c,d),this.$el.append(e.render().el),this},d}(a.Component),a.MenuItem=function(a){function b(){this.setContent=c(this.setContent,this),this.render=c(this.render,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.tagName="li",b.prototype.template=_.template("<a href='<%= href %>'><%= content %></a>"),b.prototype.initialize=function(){var a,b,c,d;return this.addClass("backpack-menu-item"),d=this.options,a=d.content,b=d.events,c=d.name,this.setContent(a,b),this.delegateEvents(this.events),this.addClass(this.slug(c)),this},b.prototype.render=function(){return this.$el.html(this.content),this},b.prototype.setContent=function(a,b){return a.el!=null?(this.content=a.el,this):_.isString(b)?(this.content=this.template({href:b,content:a}),this):_.isFunction(b)?(this.events={click:b},this.content=this.template({href:"javascript:void(0);",content:a}),this):(this.events=b,this.content=this.template({href:"javascript:void(0);",content:a}),this)},b}(a.Component)})).call(this);