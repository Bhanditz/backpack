((function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=Object.prototype.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},f=Array.prototype.slice;b=typeof exports!="undefined"&&exports!==null?exports:this,a={VERSION:"0.0.1"},b.Backpack=a,a.Menu=function(b){function d(){this.add=c(this.add,this),this.render=c(this.render,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="ul",d.prototype.className="bp-menu",d.prototype.initialize=function(){return this.items={},this.observer=new a.Observer,this},d.prototype.render=function(){return this.$el.appendTo("body"),this},d.prototype.add=function(b,c){var d;return d=new a.MenuItem(this.observer,b,c),this.$el.append(d.render().el),this.items[b]=d,this},d}(Backbone.View),a.MenuItem=function(a){function b(){this.slug=c(this.slug,this),this.handleHover=c(this.handleHover,this),this.handleClick=c(this.handleClick,this),this.render=c(this.render,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.tagName="li",b.prototype.className="bp-menuItem",b.prototype.template=_.template("<a href='javascript:void(0);'> <%= name %> </a> "),b.prototype.events={click:"handleClick",hover:"handleHover"},b.prototype.initialize=function(a,b,c){return this.observer=a,this.name=b,this.fn=c,this.$el.addClass(this.slug(this.name))},b.prototype.render=function(){return this.$el.html(this.template({name:this.name})),this},b.prototype.handleClick=function(a){return a.preventDefault(),a.stopPropagation(),this.observer.publish("menu:"+this.name+":click"),typeof this.fn=="function"?this.fn():void 0},b.prototype.handleHover=function(a){return a.preventDefault(),a.stopPropagation(),this.observer.publish("menu:"+this.name+":hover")},b.prototype.slug=function(a){return a.toLowerCase().replace(/\ +/g,"-").replace(/[^a-z0-9-]/g,"")},b}(Backbone.View),a.Observer=function(){function a(){this.off=c(this.off,this),this.on=c(this.on,this),this.publish=c(this.publish,this),this.callbacks={}}return a.prototype.publish=function(){var a,b,c,d,e,g;d=arguments[0],a=2<=arguments.length?f.call(arguments,1):[],console.log("published "+d),c=this.callbacks[d];if(!c)return;for(e=0,g=c.length;e<g;e++)b=c[e],b.apply(this,a);return this},a.prototype.on=function(a,b){return(this.callbacks[a]=this.callbacks[a]||[]).push(b),this},a.prototype.off=function(a){},a}()})).call(this);